import type { HttpContextContract } from '@ioc:Adonis/Core/HttpContext'
import Image from 'App/Models/Image'
import SetSubmission from 'App/Models/SetSubmission'
import DynamicSetImages from 'App/Models/DynamicSetImages'
import SetSubmissionsController from './SetSubmissionsController'

export default class DynamicSetImagesController extends SetSubmissionsController {

  public async update ({ params, request, session }: HttpContextContract) {
    const submission = await SetSubmission.query()
      .where('uuid', params.id)
      .preload('creatorAccount')
      .preload('dynamicSetImages')
      .firstOrFail()

    await this.creatorOrAdmin({ creator: submission.creatorAccount, session })

    const [
      image1_1,
      image4_1, image4_2, image4_3, image4_4,
      image5_1, image5_2, image5_3, image5_4, image5_5,
      image10_1, image10_2, image10_3, image10_4, image10_5, image10_6, image10_7, image10_8, image10_9, image10_10,
      image20_1, image20_2, image20_3, image20_4, image20_5, image20_6, image20_7, image20_8, image20_9, image20_10,
      image20_11, image20_12, image20_13, image20_14, image20_15, image20_16, image20_17, image20_18, image20_19, image20_20,
      image40_1, image40_2, image40_3, image40_4, image40_5, image40_6, image40_7, image40_8, image40_9, image40_10,
      image40_11, image40_12, image40_13, image40_14, image40_15, image40_16, image40_17, image40_18, image40_19, image40_20,
      image40_21, image40_22, image40_23, image40_24, image40_25, image40_26, image40_27, image40_28, image40_29, image40_30,
      image40_31, image40_32, image40_33, image40_34, image40_35, image40_36, image40_37, image40_38, image40_39, image40_40,
    ] = await Promise.all([
      Image.findBy('uuid', request.input('image_1_1_id', null)),
      Image.findBy('uuid', request.input('image_4_1_id', null)),
      Image.findBy('uuid', request.input('image_4_2_id', null)),
      Image.findBy('uuid', request.input('image_4_3_id', null)),
      Image.findBy('uuid', request.input('image_4_4_id', null)),
      Image.findBy('uuid', request.input('image_5_1_id', null)),
      Image.findBy('uuid', request.input('image_5_2_id', null)),
      Image.findBy('uuid', request.input('image_5_3_id', null)),
      Image.findBy('uuid', request.input('image_5_4_id', null)),
      Image.findBy('uuid', request.input('image_5_5_id', null)),
      Image.findBy('uuid', request.input('image_10_1_id', null)),
      Image.findBy('uuid', request.input('image_10_2_id', null)),
      Image.findBy('uuid', request.input('image_10_3_id', null)),
      Image.findBy('uuid', request.input('image_10_4_id', null)),
      Image.findBy('uuid', request.input('image_10_5_id', null)),
      Image.findBy('uuid', request.input('image_10_6_id', null)),
      Image.findBy('uuid', request.input('image_10_7_id', null)),
      Image.findBy('uuid', request.input('image_10_8_id', null)),
      Image.findBy('uuid', request.input('image_10_9_id', null)),
      Image.findBy('uuid', request.input('image_10_10_id', null)),
      Image.findBy('uuid', request.input('image_20_1_id', null)),
      Image.findBy('uuid', request.input('image_20_2_id', null)),
      Image.findBy('uuid', request.input('image_20_3_id', null)),
      Image.findBy('uuid', request.input('image_20_4_id', null)),
      Image.findBy('uuid', request.input('image_20_5_id', null)),
      Image.findBy('uuid', request.input('image_20_6_id', null)),
      Image.findBy('uuid', request.input('image_20_7_id', null)),
      Image.findBy('uuid', request.input('image_20_8_id', null)),
      Image.findBy('uuid', request.input('image_20_9_id', null)),
      Image.findBy('uuid', request.input('image_20_10_id', null)),
      Image.findBy('uuid', request.input('image_20_11_id', null)),
      Image.findBy('uuid', request.input('image_20_12_id', null)),
      Image.findBy('uuid', request.input('image_20_13_id', null)),
      Image.findBy('uuid', request.input('image_20_14_id', null)),
      Image.findBy('uuid', request.input('image_20_15_id', null)),
      Image.findBy('uuid', request.input('image_20_16_id', null)),
      Image.findBy('uuid', request.input('image_20_17_id', null)),
      Image.findBy('uuid', request.input('image_20_18_id', null)),
      Image.findBy('uuid', request.input('image_20_19_id', null)),
      Image.findBy('uuid', request.input('image_20_20_id', null)),
      Image.findBy('uuid', request.input('image_40_1_id', null)),
      Image.findBy('uuid', request.input('image_40_2_id', null)),
      Image.findBy('uuid', request.input('image_40_3_id', null)),
      Image.findBy('uuid', request.input('image_40_4_id', null)),
      Image.findBy('uuid', request.input('image_40_5_id', null)),
      Image.findBy('uuid', request.input('image_40_6_id', null)),
      Image.findBy('uuid', request.input('image_40_7_id', null)),
      Image.findBy('uuid', request.input('image_40_8_id', null)),
      Image.findBy('uuid', request.input('image_40_9_id', null)),
      Image.findBy('uuid', request.input('image_40_10_id', null)),
      Image.findBy('uuid', request.input('image_40_11_id', null)),
      Image.findBy('uuid', request.input('image_40_12_id', null)),
      Image.findBy('uuid', request.input('image_40_13_id', null)),
      Image.findBy('uuid', request.input('image_40_14_id', null)),
      Image.findBy('uuid', request.input('image_40_15_id', null)),
      Image.findBy('uuid', request.input('image_40_16_id', null)),
      Image.findBy('uuid', request.input('image_40_17_id', null)),
      Image.findBy('uuid', request.input('image_40_18_id', null)),
      Image.findBy('uuid', request.input('image_40_19_id', null)),
      Image.findBy('uuid', request.input('image_40_20_id', null)),
      Image.findBy('uuid', request.input('image_40_21_id', null)),
      Image.findBy('uuid', request.input('image_40_22_id', null)),
      Image.findBy('uuid', request.input('image_40_23_id', null)),
      Image.findBy('uuid', request.input('image_40_24_id', null)),
      Image.findBy('uuid', request.input('image_40_25_id', null)),
      Image.findBy('uuid', request.input('image_40_26_id', null)),
      Image.findBy('uuid', request.input('image_40_27_id', null)),
      Image.findBy('uuid', request.input('image_40_28_id', null)),
      Image.findBy('uuid', request.input('image_40_29_id', null)),
      Image.findBy('uuid', request.input('image_40_30_id', null)),
      Image.findBy('uuid', request.input('image_40_31_id', null)),
      Image.findBy('uuid', request.input('image_40_32_id', null)),
      Image.findBy('uuid', request.input('image_40_33_id', null)),
      Image.findBy('uuid', request.input('image_40_34_id', null)),
      Image.findBy('uuid', request.input('image_40_35_id', null)),
      Image.findBy('uuid', request.input('image_40_36_id', null)),
      Image.findBy('uuid', request.input('image_40_37_id', null)),
      Image.findBy('uuid', request.input('image_40_38_id', null)),
      Image.findBy('uuid', request.input('image_40_39_id', null)),
      Image.findBy('uuid', request.input('image_40_40_id', null)),
    ])

    if (! submission.dynamicSetImagesId) {
      const dynamicSetImages = await DynamicSetImages.create({})
      submission.dynamicSetImagesId = dynamicSetImages.id
      await submission.save()
    }

    await submission.load('dynamicSetImages')

    submission.dynamicSetImages.fill({
      image_1_1_id: image1_1?.id,
      image_4_1_id: image4_1?.id,
      image_4_2_id: image4_2?.id,
      image_4_3_id: image4_3?.id,
      image_4_4_id: image4_4?.id,
      image_5_1_id: image5_1?.id,
      image_5_2_id: image5_2?.id,
      image_5_3_id: image5_3?.id,
      image_5_4_id: image5_4?.id,
      image_5_5_id: image5_5?.id,
      image_10_1_id: image10_1?.id,
      image_10_2_id: image10_2?.id,
      image_10_3_id: image10_3?.id,
      image_10_4_id: image10_4?.id,
      image_10_5_id: image10_5?.id,
      image_10_6_id: image10_6?.id,
      image_10_7_id: image10_7?.id,
      image_10_8_id: image10_8?.id,
      image_10_9_id: image10_9?.id,
      image_10_10_id: image10_10?.id,
      image_20_1_id: image20_1?.id,
      image_20_2_id: image20_2?.id,
      image_20_3_id: image20_3?.id,
      image_20_4_id: image20_4?.id,
      image_20_5_id: image20_5?.id,
      image_20_6_id: image20_6?.id,
      image_20_7_id: image20_7?.id,
      image_20_8_id: image20_8?.id,
      image_20_9_id: image20_9?.id,
      image_20_10_id: image20_10?.id,
      image_20_11_id: image20_11?.id,
      image_20_12_id: image20_12?.id,
      image_20_13_id: image20_13?.id,
      image_20_14_id: image20_14?.id,
      image_20_15_id: image20_15?.id,
      image_20_16_id: image20_16?.id,
      image_20_17_id: image20_17?.id,
      image_20_18_id: image20_18?.id,
      image_20_19_id: image20_19?.id,
      image_20_20_id: image20_20?.id,
      image_40_1_id: image40_1?.id,
      image_40_2_id: image40_2?.id,
      image_40_3_id: image40_3?.id,
      image_40_4_id: image40_4?.id,
      image_40_5_id: image40_5?.id,
      image_40_6_id: image40_6?.id,
      image_40_7_id: image40_7?.id,
      image_40_8_id: image40_8?.id,
      image_40_9_id: image40_9?.id,
      image_40_10_id: image40_10?.id,
      image_40_11_id: image40_11?.id,
      image_40_12_id: image40_12?.id,
      image_40_13_id: image40_13?.id,
      image_40_14_id: image40_14?.id,
      image_40_15_id: image40_15?.id,
      image_40_16_id: image40_16?.id,
      image_40_17_id: image40_17?.id,
      image_40_18_id: image40_18?.id,
      image_40_19_id: image40_19?.id,
      image_40_20_id: image40_20?.id,
      image_40_21_id: image40_21?.id,
      image_40_22_id: image40_22?.id,
      image_40_23_id: image40_23?.id,
      image_40_24_id: image40_24?.id,
      image_40_25_id: image40_25?.id,
      image_40_26_id: image40_26?.id,
      image_40_27_id: image40_27?.id,
      image_40_28_id: image40_28?.id,
      image_40_29_id: image40_29?.id,
      image_40_30_id: image40_30?.id,
      image_40_31_id: image40_31?.id,
      image_40_32_id: image40_32?.id,
      image_40_33_id: image40_33?.id,
      image_40_34_id: image40_34?.id,
      image_40_35_id: image40_35?.id,
      image_40_36_id: image40_36?.id,
      image_40_37_id: image40_37?.id,
      image_40_38_id: image40_38?.id,
      image_40_39_id: image40_39?.id,
      image_40_40_id: image40_40?.id,
    })

    await submission.dynamicSetImages.save()

    return submission
  }

}
